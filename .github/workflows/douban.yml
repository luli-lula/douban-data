name: Douban Sync
on:
  schedule:
    - cron: "0 2 * * *"  # 每天凌晨2点自动同步
  workflow_dispatch:  # 支持手动触发
  
jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        
      - name: Sync Movies
        uses: lizheming/doumark-action@master
        with:
          id: "59715677"  # 你的豆瓣数字ID
          type: movie
          format: csv
          dir: ./data
          
      - name: Sync Books
        uses: lizheming/doumark-action@master
        with:
          id: "59715677"  # 你的豆瓣数字ID
          type: book
          format: csv
          dir: ./data
          
      - name: Sync Music
        uses: lizheming/doumark-action@master
        with:
          id: "59715677"  # 你的豆瓣数字ID
          type: music
          format: csv
          dir: ./data
          
      - name: Commit and Push
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: "chore: update douban data"
          file_pattern: "data/*"
